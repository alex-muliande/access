{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags%}
{% include 'final.html' %}
{% block content %}
<script src='{% static "js/data.js" %}'></script>
<h2>FORM RESPONSES</h2>


<div class="table-responsive">
    <table id="dtBasicExample" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead class="black white-text">
            <tr class="font-weight-bold">
                <th class="th-sm">Full names
                </th>
                <th class="th-sm">Email
                </th>
                <th class="th-sm">How much money do you earn each month? Include only money you earn yourself through
                    working. Do not include money you receive from other people.
                </th>
                <th class="th-sm">Do you own a laptop? What kind of laptop is it? What year was it made?
                </th>
                <th class="th-sm">How did you afford your laptop?
                </th>
                <th class="th-sm">Were you ever sent home from high school to collect school fees? If so, how many times
                    were you sent home?
                </th>
                <th class="th-sm">If you were sent home to collect school fees, how much time did you spend out of
                    school in total?
                </th>
                <th class="th-sm">List the names of your guardians and write how much money they make per month. If it
                    depends on the month, write the average.
                </th>
            </tr>
        </thead>
        <tbody>
            {% for d in data %}
            <tr class='data{{d.pk}}'>
                <td>{{ d.all_names}}</td>
                <td>{{ d.email}}</td>
                <td>{{ d.earnings_per_month}}</td>
                <td>{{ d.laptop_details}}</td>
                <td>{{ d.afford_laptop}}</td>
                <td>{{ d.sent_home_schoolfees}}</td>
                <td>{{ d.time_out_of_school }}</td>
                <td>{{ d.gurdians_earning }}</td>
                <td>
                    <button class='all_data'>
                    <input type="hidden" class="getData" value='{{d.pk}}'> Expand</button>
                </td>

                <td> 
                    {% if d.status == 'Pending'%}
                    <small class='text-warning'>{{d.status}}</small>
                    {% endif %}
                    {% if d.status == 'Rejected'%}
                    <small class='text-danger'>{{d.status}}</small>
                    {% endif %}
                    {% if d.status == 'Accepted'%}
                    <small class='text-success '>{{d.status}}</small>
                    {% endif %}
                <div class="content-section">
                    <form method="GET" action="{% url 'update_status' d.pk %}">
                            <input type='radio' name='status' required selected value="-">Pending <br>
                            <input type='radio' name='status' required value="0">Rejected <br>
                            <input type='radio' name='status' required value="1">Accepted
                        <div class="form-group">
                            <button class="btn btn-outline-info" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
                </td>
                </tr>
            {% endfor %}
        </tbody>

    </table>
</div>


<div class="container-fluid all">
    <div class="hide">o</div>
    <div class="row">
        <div class="my-data">

        </div>
    </div>
</div>


<div class="row">
        <div class="col-md-4">
                <h2>Pending</h2>
            {% if pending %}
            {% for i in pending %}
            <h3> {{ i.all_names}}</h3>
            {% endfor %}
        
            {% else %}
            <h2>There are no pending Candidates at the moment</h2>
            {% endif %}
        
           
        
        </div>
        
        <div class="col-md-4">
                <h2>Accepted</h2>
            {% if accepted %}
            {% for i in accepted %}
            <h3> {{ i.all_names}}</h3>
            {% endfor %}
        
            {% else %}
            <h2>There are no accepted candidates at the moment</h2>
            {% endif %}
        
        </div>
        
        
        <div class="col-md-4">
            <h2>Rejected</h2>
            {% if rejected %}
            {% for i in rejected %}
            <h3> {{ i.all_names}}</h3>
            {% endfor %}
        
            {% else %}
            <h2>There are no rejected candidates at the moment</h2>
            {% endif %}
        </div>
        
        </div>

        <div>
            
        </div>


<style>
    .all {
        position: fixed;
        top: 30vh;
        height: 100vh;
        background: rgba(0, 0, 0, .7);
        /* visibility: hidden; */
        margin: 0 auto;
        display: none
    }

    .all .hide {
        float: right;
        background: red;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        margin: 30px 70px 0 0;
        z-index: 1000000;
    }

    .all .row {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%
    }

    .all .row .my-data {
        padding: 20px;
        background: white;
        width: 70%;
        height: 90%;
        overflow-y: auto;

    }
</style>

{% endblock %}